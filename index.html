<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Live Clima Capitais</title>
    <style>
        body { margin: 0; background: #000; color: white; font-family: sans-serif; overflow: hidden; }
        #bg {
            position: fixed; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            z-index: -1; transition: background 2s ease-in-out;
            filter: brightness(0.5);
        }
        .container {
            position: absolute; bottom: 10%; left: 5%;
            background: rgba(0,0,0,0.8); padding: 40px; border-radius: 25px;
            border: 2px solid #ffce00; width: 400px;
        }
        h1 { font-size: 45px; margin: 0; color: #ffce00; }
        .temp { font-size: 70px; font-weight: bold; }
        #icone { width: 100px; vertical-align: middle; }
    </style>
</head>
<body>

    <div id="bg"></div>
    <div class="container">
        <h1 id="cidade">Carregando...</h1>
        <div id="info">
            <span class="temp" id="temp">--°C</span>
            <img id="icone" src="" alt="">
        </div>
        <p id="regiao">Iniciando sistema...</p>
    </div>

    <script>
        const API_KEY = 'fbed7f01ff8461ca2d705889dcb039ae'; // <--- Verifique se não tem espaços!
        
        const capitais = [
            {n: "Rio Branco", s: "AC"}, {n: "Maceió", s: "AL"}, {n: "Macapá", s: "AP"},
            {n: "Manaus", s: "AM"}, {n: "Salvador", s: "BA"}, {n: "Fortaleza", s: "CE"},
            {n: "Brasília", s: "DF"}, {n: "Vitória", s: "ES"}, {n: "Goiânia", s: "GO"},
            {n: "São Luís", s: "MA"}, {n: "Cuiabá", s: "MT"}, {n: "Campo Grande", s: "MS"},
            {n: "Belo Horizonte", s: "MG"}, {n: "Belém", s: "PA"}, {n: "João Pessoa", s: "PB"},
            {n: "Curitiba", s: "PR"}, {n: "Recife", s: "PE"}, {n: "Teresina", s: "PI"},
            {n: "Rio de Janeiro", s: "RJ"}, {n: "Natal", s: "RN"}, {n: "Porto Alegre", s: "RS"},
            {n: "Porto Velho", s: "RO"}, {n: "Boa Vista", s: "RR"}, {n: "Florianópolis", s: "SC"},
            {n: "São Paulo", s: "SP"}, {n: "Aracaju", s: "SE"}, {n: "Palmas", s: "TO"}
        ];

        let i = 0;

        async function update() {
            const cap = capitais[i];
            // Corrigido para garantir o carregamento da imagem de fundo
            // Usando o buscador do Unsplash que ainda funciona via URL de imagem
            const imgUrl = `https://images.unsplash.com/photo-1444723121867-7a241cacace9?auto=format&fit=crop&w=1200&q=80&sig=${i}`;
            // Alternativa para fotos específicas de cidades (pode demorar a carregar):
            // const imgUrl = `https://loremflickr.com/1920/1080/${cap.n},city/all`;

            document.getElementById('bg').style.backgroundImage = `url('${imgUrl}')`;

            try {
                const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cap.n},BR&units=metric&lang=pt_br&appid=${API_KEY}`);
                const data = await res.json();

                if(data.cod === 200) {
                    document.getElementById('cidade').innerText = cap.n;
                    document.getElementById('temp').innerText = Math.round(data.main.temp) + '°C';
                    document.getElementById('regiao').innerText = `Capital de ${cap.s}`;
                    document.getElementById('icone').src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
                } else {
                    document.getElementById('regiao').innerText = "Erro na chave API";
                }
            } catch (e) {
                console.log("Erro de conexão");
            }

            i = (i + 1) % capitais.length;
        }

        setInterval(update, 10000); // Troca a cada 10 segundos
        update();
    </script>
</body>
</html>
