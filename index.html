<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Live Clima e Notícias - Capitais</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: white; font-family: 'Segoe UI', Arial, sans-serif; overflow: hidden; }

        /* FUNDO DINÂMICO */
        #bg {
            position: fixed; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            z-index: -1; transition: background 2s ease-in-out;
            filter: brightness(0.3);
        }

        /* CONTAINER PRINCIPAL */
        .main-content {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            height: 100vh;
            padding: 50px;
        }

        /* PAINEL DE CLIMA */
        .clima-panel {
            background: rgba(0,0,0,0.8);
            padding: 30px;
            border-radius: 20px 20px 0 0;
            border-left: 10px solid #ffce00;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .cidade-info h1 { font-size: 50px; text-transform: uppercase; }
        .temp-val { font-size: 80px; font-weight: bold; color: #ffce00; }

        /* PAINEL DE NOTÍCIAS */
        .news-panel {
            background: rgba(255, 206, 0, 0.9);
            color: #000;
            padding: 20px;
            border-radius: 0 0 20px 20px;
            font-size: 24px;
            font-weight: bold;
            min-height: 80px;
            display: flex;
            align-items: center;
        }

        .news-label {
            background: #000;
            color: #fff;
            padding: 5px 15px;
            border-radius: 5px;
            margin-right: 15px;
            font-size: 18px;
            white-space: nowrap;
        }

        /* BARRA DE PROGRESSO (60s) */
        .progress-bar {
            position: fixed; bottom: 0; left: 0; height: 8px;
            background: #ffce00; width: 0%;
        }
    </style>
</head>
<body>

    <div id="bg"></div>

    <div class="main-content">
        <div class="clima-panel">
            <div class="cidade-info">
                <p id="estado" style="color:#ffce00; font-size: 20px;"></p>
                <h1 id="cidade">Carregando...</h1>
            </div>
            <div style="display:flex; align-items:center;">
                <span class="temp-val" id="temp">--°C</span>
                <img id="icone" src="" alt="">
            </div>
        </div>
        <div class="news-panel">
            <span class="news-label">ÚLTIMAS NOTÍCIAS</span>
            <span id="noticia">Buscando informações locais...</span>
        </div>
    </div>

    <div class="progress-bar" id="progress"></div>

    <script>
        const API_KEY = '630c9e2bcd6b9a605058220d40683967'; 
        
        const capitais = [
            {n: "Rio Branco", s: "Acre", foto: "https://upload.wikimedia.org/wikipedia/commons/4/41/Centro_de_Cruzeiro_do_Sul-AC.jpg"},
            {n: "Maceió", s: "Alagoas", foto: "https://upload.wikimedia.org/wikipedia/commons/2/2a/Macei%C3%B3_Alagoas_Brasil.jpg"},
            {n: "Macapá", s: "Amapá", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Macap%C3%A1_%2830713231128%29.jpg/1280px-Macap%C3%A1_%2830713231128%29.jpg?20201125045728"},
            {n: "Manaus", s: "Amazonas", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Manaus_amazonas.jpg/1280px-Manaus_amazonas.jpg?20220416184319"},
            {n: "Salvador", s: "Bahia", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Salvador_BA_%28cropped%29_2.jpg/1280px-Salvador_BA_%28cropped%29_2.jpg?20230717221202"},
            {n: "Fortaleza", s: "Ceará", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Fortaleza%2C_Brazil_%283%29.jpg/1280px-Fortaleza%2C_Brazil_%283%29.jpg?20140729071225"},
            {n: "Brasília", s: "Distrito Federal", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Parque_da_Cidade_-_Brasilia_-_DF_-_panoramio.jpg/1280px-Parque_da_Cidade_-_Brasilia_-_DF_-_panoramio.jpg?20161217193304"},
            {n: "Vitória", s: "Espírito Santo", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/Vista_da_cidade_de_Vit%C3%B3ria_ES_a_partir_da_Pedra_dos_Dois_Olhos_3.jpg/1280px-Vista_da_cidade_de_Vit%C3%B3ria_ES_a_partir_da_Pedra_dos_Dois_Olhos_3.jpg?20220429220757"},
            {n: "Goiânia", s: "Goiás", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Goiania_banner.jpg/1280px-Goiania_banner.jpg?20220306061719"},
            {n: "São Luís", s: "Maranhão", foto: "https://upload.wikimedia.org/wikipedia/commons/e/e5/Puente_Don_Luis_I%2C_Oporto%2C_Portugal%2C_2012-05-09%2C_DD_13.JPG"},
            {n: "Cuiabá", s: "Mato Grosso", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Cuiab%C3%A1_center.jpg/1280px-Cuiab%C3%A1_center.jpg?20220320130740"},
            {n: "Campo Grande", s: "Mato Grosso do Sul", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Parque_das_Na%C3%A7%C3%B5es_Ind%C3%ADgenas_em_CG.jpg/1280px-Parque_das_Na%C3%A7%C3%B5es_Ind%C3%ADgenas_em_CG.jpg?20091126192156"},
            {n: "Belo Horizonte", s: "Minas Gerais", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Belo_Horizonte%2C_Brasil.jpg/1280px-Belo_Horizonte%2C_Brasil.jpg?20180517052443"},
            {n: "Belém", s: "Pará", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Bel%C3%A9m_Pra%C3%A7a_do_Rel%C3%B3gio_Clock_Place_01.jpg/1280px-Bel%C3%A9m_Pra%C3%A7a_do_Rel%C3%B3gio_Clock_Place_01.jpg?20091024093716"},
            {n: "João Pessoa", s: "Paraíba", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Mana%C3%ADra_%E2%80%93_Jo%C3%A3o_Pessoa_%28PB%29.jpg/1280px-Mana%C3%ADra_%E2%80%93_Jo%C3%A3o_Pessoa_%28PB%29.jpg?20220728222755"},
            {n: "Curitiba", s: "Paraná", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Cidade_de_Curitiba_by_Augusto_Janiscki_Junior.jpg/1280px-Cidade_de_Curitiba_by_Augusto_Janiscki_Junior.jpg?20120919120547"},
            {n: "Recife", s: "Pernambuco", foto: "https://images.unsplash.com/photo-1597920780234-f86a596048d0?w=1200"},
            {n: "Teresina", s: "Piauí", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Teresina_vista_de_cima_e_ao_fundo_a_Cidade_de_Timon_MA.jpg/1280px-Teresina_vista_de_cima_e_ao_fundo_a_Cidade_de_Timon_MA.jpg?20240814184008"},
            {n: "Rio de Janeiro", s: "Rio de Janeiro", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Vista_a%C3%A9rea_Centro_do_Rio_de_Janeiro_RJ.jpg/1280px-Vista_a%C3%A9rea_Centro_do_Rio_de_Janeiro_RJ.jpg?20110628202643"},
            {n: "Natal", s: "Rio Grande do Norte", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Fotos-A%C3%A9reas-Cidade-de-Natal.jpg/1280px-Fotos-A%C3%A9reas-Cidade-de-Natal.jpg?20210921021200"},
            {n: "Porto Alegre", s: "Rio Grande do Sul", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Vistas_de_Porto_Alegre_%287410124084%29.jpg/1280px-Vistas_de_Porto_Alegre_%287410124084%29.jpg?20151126235720"},
            {n: "Porto Velho", s: "Rondônia", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Porto_Velho%2C_Rond%C3%B4nia%2C_Brasil.jpg/1280px-Porto_Velho%2C_Rond%C3%B4nia%2C_Brasil.jpg?20200121234708"},
            {n: "Boa Vista", s: "Roraima", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Boa_Vista_Roraima_Brazil.jpg/1280px-Boa_Vista_Roraima_Brazil.jpg?20250324183141"},
            {n: "Florianópolis", s: "Santa Catarina", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Avenida_Beira_Mar_Norte_Florianopolis.jpg/1280px-Avenida_Beira_Mar_Norte_Florianopolis.jpg?20101230225426"},
            {n: "São Paulo", s: "São Paulo", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Imagens_da_Cidade_de_S%C3%A3o_Paulo_e_Zool%C3%B3gico_da_Capital_Paulista._%2847480340391%29.jpg/1280px-Imagens_da_Cidade_de_S%C3%A3o_Paulo_e_Zool%C3%B3gico_da_Capital_Paulista._%2847480340391%29.jpg?20190327200427"},
            {n: "Aracaju", s: "Sergipe", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Monumento_aos_150_anos_de_funda%C3%A7%C3%A3o_da_cidade_de_Aracaju_Sergipe_2022-6256.jpg/1280px-Monumento_aos_150_anos_de_funda%C3%A7%C3%A3o_da_cidade_de_Aracaju_Sergipe_2022-6256.jpg?20220904153448"},
            {n: "Palmas", s: "Tocantins", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Praia_de_Palmas_%2820330051450%29.jpg/1280px-Praia_de_Palmas_%2820330051450%29.jpg?20170430050545"}
        ];


        let i = 0;

        async function updatePage() {
            const cap = capitais[i];
            
            // 1. Atualiza Foto
            document.getElementById('bg').style.backgroundImage = `url('${cap.foto}')`;
            
            // 2. Barra de Progresso (60s)
            const pb = document.getElementById('progress');
            pb.style.transition = 'none';
            pb.style.width = '0%';
            setTimeout(() => {
                pb.style.transition = 'width 60s linear';
                pb.style.width = '100%';
            }, 100);

            // 3. Busca Clima
            try {
                const resClima = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cap.n},BR&units=metric&lang=pt_br&appid=${API_KEY}`);
                const dataClima = await resClima.json();
                if(dataClima.cod === 200) {
                    document.getElementById('cidade').innerText = cap.n;
                    document.getElementById('estado').innerText = cap.s;
                    document.getElementById('temp').innerText = Math.round(dataClima.main.temp) + '°C';
                    document.getElementById('icone').src = `https://openweathermap.org/img/wn/${dataClima.weather[0].icon}@4x.png`;
                }
            } catch (e) { console.log("Erro Clima"); }

            // 4. Busca Notícias (Usando RSS2JSON para converter o Google News em JSON legível)
            try {
                const query = `noticias+${cap.n.replace(" ", "+")}`;
                const rssUrl = `https://news.google.com/rss/search?q=${query}&hl=pt-BR&gl=BR&ceid=BR:pt-419`;
                const resNews = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`);
                const dataNews = await resNews.json();
                
                if(dataNews.status === 'ok' && dataNews.items.length > 0) {
                    // Pega o título da primeira notícia e limpa o nome do site no final
                    let noticiaFull = dataNews.items[0].title;
                    let noticiaLimpa = noticiaFull.split(" - ")[0];
                    document.getElementById('noticia').innerText = noticiaLimpa;
                } else {
                    document.getElementById('noticia').innerText = "Acompanhe as notícias de hoje no portal.";
                }
            } catch (e) { 
                document.getElementById('noticia').innerText = "Atualizando boletim informativo...";
            }

            i = (i + 1) % capitais.length;
        }

        setInterval(updatePage, 60000); // 60 segundos
        updatePage();
    </script>
</body>
</html>
