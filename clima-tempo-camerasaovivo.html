<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live 24/7 - Clima, NotÃ­cias e Screenshot</title>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }

        /* RELÃ“GIO EM TEMPO REAL */
        #relogio {
            position: fixed; top: 70px; right: 50px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px; border-radius: 15px;
            font-size: 48px; font-weight: bold; color: #ffce00;
            z-index: 110; border: 2px solid #ffce00;
            font-variant-numeric: tabular-nums;
        }

        /* MARQUEE / LETREIRO */
        .marquee-container {
            position: fixed; top: 0; width: 100%; background: #ffce00;
            color: #000; padding: 12px 0; font-weight: bold; font-size: 22px;
            z-index: 100; border-bottom: 3px solid #f39c12; overflow: hidden;
        }
        .marquee-text {
            display: inline-block; white-space: nowrap;
            animation: marquee 30s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* FUNDO E CONTAINERS */
        #bg, #camera-container {
            position: fixed; width: 100%; height: 100%;
            z-index: -1; transition: opacity 1.5s ease;
        }
        #bg { background-size: cover; background-position: center; filter: brightness(0.3); }
        
        /* IMAGEM QUE SUBSTITUI A LIVE */
        #live-screenshot {
            width: 100%; height: 100%; object-fit: cover;
            display: none;
        }

        /* INTERFACE (DADOS) */
        .ui-overlay {
            position: absolute; bottom: 50px; left: 50px; right: 50px;
            transition: opacity 1s ease, transform 1s ease;
            z-index: 10;
        }
        .clima-panel {
            background: rgba(0,0,0,0.85); padding: 35px;
            border-radius: 20px 20px 0 0; border-left: 12px solid #ffce00;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(15px);
        }
        .news-panel {
            background: rgba(255, 206, 0, 0.95); color: #000;
            padding: 20px 30px; border-radius: 0 0 20px 20px;
            font-size: 26px; font-weight: bold; min-height: 90px;
            display: flex; align-items: center;
        }
        .hidden { opacity: 0; transform: translateY(40px); pointer-events: none; }

        .temp { font-size: 100px; font-weight: bold; color: #ffce00; }
        #icone { width: 130px; }

        /* BARRA DE PROGRESSO */
        #progress-container { position: fixed; bottom: 0; left: 0; width: 100%; height: 8px; background: rgba(255,255,255,0.1); }
        #progress-bar { height: 100%; background: #ffce00; width: 0%; }
    </style>
</head>
<body>

    <div id="relogio">00:00:00</div>

    <div class="marquee-container">
        <div class="marquee-text">
            âš¡ OFERTAS AMAZON: EletrÃ´nicos com atÃ© 40% OFF! Confira o link na bio. &nbsp;&nbsp;&nbsp;&nbsp; 
            ðŸ”¥ Smartphones, Notebooks e AcessÃ³rios em promoÃ§Ã£o por tempo limitado! &nbsp;&nbsp;&nbsp;&nbsp; 
            ðŸš€ Siga nosso canal para acompanhar as melhores ofertas do dia.
        </div>
    </div>

    <div id="bg"></div>

    <div id="camera-container" style="opacity: 0;">
        <img id="live-screenshot" src="" alt="Screenshot da Live">
    </div>

    <div class="ui-overlay" id="interface">
        <div class="clima-panel">
            <div>
                <p id="estado" style="color:#ffce00; font-size: 22px; margin-bottom: 5px; font-weight: bold;"></p>
                <h1 id="cidade" style="font-size: 60px; text-transform: uppercase;">Iniciando...</h1>
            </div>
            <div style="display:flex; align-items:center;">
                <span class="temp" id="temp">--Â°C</span>
                <img id="icone" src="" alt="">
            </div>
        </div>
        <div class="news-panel">
            <span id="noticia">Aguardando boletim informativo...</span>
        </div>
    </div>

    <div id="progress-container"><div id="progress-bar"></div></div>

    <script>
        const API_KEY = '630c9e2bcd6b9a605058220d40683967'; 
        const LIVE_ID = 'Er0XPlc_b20'; // ID da sua Live
        
        const capitais = [
            {
                n: "Natal", 
                s: "Rio Grande do Norte", 
                foto: "https://images.unsplash.com/photo-1601362840469-51e4d8d39785?w=1200"
            }
        ];

        let i = 0;
        let mostrandoCamera = false;
        const interface = document.getElementById('interface');
        const cameraCont = document.getElementById('camera-container');
        const imgLive = document.getElementById('live-screenshot');
        const bg = document.getElementById('bg');

        // ATUALIZAÃ‡ÃƒO DO RELÃ“GIO (BrasÃ­lia)
        function atualizarRelogio() {
            const agora = new Date();
            const opcoes = { timeZone: 'America/Sao_Paulo', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            document.getElementById('relogio').innerText = agora.toLocaleTimeString('pt-BR', opcoes);
        }
        setInterval(atualizarRelogio, 1000);
        atualizarRelogio();

        async function alternarCiclo() {
            const cap = capitais[i];
            const pBar = document.getElementById('progress-bar');

            pBar.style.transition = 'none'; pBar.style.width = '0%';
            setTimeout(() => { pBar.style.transition = 'width 30s linear'; pBar.style.width = '100%'; }, 100);

            if (!mostrandoCamera) {
                // ESTADO 1: MOSTRAR PAINEL DE DADOS
                cameraCont.style.opacity = "0";
                imgLive.style.display = "none";
                interface.classList.remove('hidden');
                bg.style.backgroundImage = `url('${cap.foto}')`;
                
                await carregarDados(cap);
                mostrandoCamera = true;
            } else {
                // ESTADO 2: MOSTRAR SCREENSHOT DA LIVE (SEM ANÃšNCIOS)
                interface.classList.add('hidden');
                cameraCont.style.opacity = "1";
                imgLive.style.display = "block";
                
                // Pega a thumb da live em alta qualidade como "screenshot"
                // hqdefault garante uma imagem nÃ­tida sem carregar o player de vÃ­deo
                imgLive.src = `https://img.youtube.com/vi/${LIVE_ID}/maxresdefault.jpg?t=${new Date().getTime()}`;
                
                mostrandoCamera = false;
                i = (i + 1) % capitais.length;
            }
        }

        async function carregarDados(cap) {
            try {
                const resC = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cap.n},BR&units=metric&lang=pt_br&appid=${API_KEY}`);
                const dataC = await resC.json();
                if(dataC.cod === 200) {
                    document.getElementById('cidade').innerText = cap.n;
                    document.getElementById('estado').innerText = `CAPITAL: ${cap.s}`;
                    document.getElementById('temp').innerText = Math.round(dataC.main.temp) + 'Â°C';
                    document.getElementById('icone').src = `https://openweathermap.org/img/wn/${dataC.weather[0].icon}@4x.png`;
                }

                const rss = `https://news.google.com/rss/search?q=noticias+${cap.n}&hl=pt-BR&gl=BR&ceid=BR:pt-419`;
                const resN = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rss)}`);
                const dataN = await resN.json();
                if(dataN.items.length > 0) {
                    document.getElementById('noticia').innerText = dataN.items[0].title.split(" - ")[0];
                }
            } catch (e) { console.log("Erro na carga de dados"); }
        }

        setInterval(alternarCiclo, 30000);
        alternarCiclo();
    </script>
</body>
</html>
