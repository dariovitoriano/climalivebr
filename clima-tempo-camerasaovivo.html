<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Clima, Not√≠cias e C√¢meras AO VIVO</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: white; font-family: 'Segoe UI', Arial, sans-serif; overflow: hidden; }

        /* LETREIRO SUPERIOR */
        .marquee-container {
            position: fixed; top: 0; width: 100%; background: #ffce00;
            color: #000; padding: 12px 0; font-weight: bold; font-size: 22px;
            z-index: 100; border-bottom: 3px solid #f39c12; overflow: hidden;
        }
        .marquee-text {
            display: inline-block; white-space: nowrap;
            animation: marquee 25s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* FUNDO E V√çDEO */
        #bg, #camera-container {
            position: fixed; width: 100%; height: 100%;
            z-index: -1; transition: opacity 1.5s ease;
        }
        #bg { background-size: cover; background-position: center; filter: brightness(0.4); }
        #video-player { width: 100%; height: 100%; object-fit: cover; }

        /* INTERFACE DE INFORMA√á√ïES */
        .ui-overlay {
            position: absolute; bottom: 50px; left: 50px; right: 50px;
            transition: opacity 1s ease, transform 1s ease;
            z-index: 10;
        }
        .clima-panel {
            background: rgba(0,0,0,0.85); padding: 30px;
            border-radius: 20px 20px 0 0; border-left: 10px solid #ffce00;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px);
        }
        .news-panel {
            background: rgba(255, 206, 0, 0.95); color: #000;
            padding: 20px; border-radius: 0 0 20px 20px;
            font-size: 24px; font-weight: bold; min-height: 80px;
            display: flex; align-items: center;
        }
        .hidden { opacity: 0; transform: translateY(30px); pointer-events: none; }

        .temp { font-size: 90px; font-weight: bold; color: #ffce00; }
        #icone { width: 120px; }

        /* BARRA DE PROGRESSO */
        #progress-container { position: fixed; bottom: 0; left: 0; width: 100%; height: 8px; background: rgba(255,255,255,0.1); }
        #progress-bar { height: 100%; background: #ffce00; width: 0%; }
    </style>
</head>
<body>

    <div class="marquee-container">
        <div class="marquee-text">
            ‚ö° OFERTAS AMAZON: Confira os eletr√¥nicos mais vendidos hoje com descontos de at√© 40%! &nbsp;&nbsp;&nbsp;&nbsp; 
            üî• Smartphone Samsung Galaxy S24 Ultra em Promo√ß√£o &nbsp;&nbsp;&nbsp;&nbsp; 
            üéß Fone Bluetooth JBL com Pre√ßo Especial &nbsp;&nbsp;&nbsp;&nbsp; 
            üöÄ ACESSE O LINK NA BIO E ECONOMIZE AGORA!
        </div>
    </div>

    <div id="bg"></div>

    <div id="camera-container" style="opacity: 0;">
        <video id="video-player" autoplay muted playsinline></video>
    </div>

    <div class="ui-overlay" id="interface">
        <div class="clima-panel">
            <div>
                <p id="estado" style="color:#ffce00; font-size: 20px; margin-bottom: 5px;"></p>
                <h1 id="cidade" style="font-size: 55px; text-transform: uppercase;">Carregando...</h1>
            </div>
            <div style="display:flex; align-items:center;">
                <span class="temp" id="temp">--¬∞C</span>
                <img id="icone" src="" alt="">
            </div>
        </div>
        <div class="news-panel">
            <span style="background:#000; color:#fff; padding:5px 10px; border-radius:5px; margin-right:15px; font-size:16px;">NOT√çCIAS LOCAIS</span>
            <span id="noticia">Buscando as √∫ltimas informa√ß√µes...</span>
        </div>
    </div>

    <div id="progress-container">
        <div id="progress-bar"></div>
    </div>

    <script>
        const API_KEY = '630c9e2bcd6b9a605058220d40683967'; // <--- INSIRA SUA CHAVE AQUI
        
        const capitais = [
            {n: "Rio Branco", s: "Acre", cam: "https://www.youtube.com/embed/LnnGK8eY37Y?si=ZQKbpMJSLzxZipOV", foto: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Bel%C3%A9m_Pra%C3%A7a_do_Rel%C3%B3gio_Clock_Place_01.jpg/1280px-Bel%C3%A9m_Pra%C3%A7a_do_Rel%C3%B3gio_Clock_Place_01.jpg?20091024093716"},
                    ];

        let i = 0;
        let mostrandoCamera = false;
        const video = document.getElementById('video-player');
        const hls = new Hls();

        async function alternarCiclo() {
            const cap = capitais[i];
            const interface = document.getElementById('interface');
            const cameraCont = document.getElementById('camera-container');
            const bg = document.getElementById('bg');
            const progressBar = document.getElementById('progress-bar');

            // Reset Barra de Progresso (30s)
            progressBar.style.transition = 'none';
            progressBar.style.width = '0%';
            setTimeout(() => { progressBar.style.transition = 'width 30s linear'; progressBar.style.width = '100%'; }, 100);

            if (!mostrandoCamera) {
                // ESTADO 1: MOSTRAR PAINEL DE DADOS
                cameraCont.style.opacity = "0";
                video.pause();
                interface.classList.remove('hidden');
                bg.style.backgroundImage = `url('${cap.foto}')`;
                
                await carregarDados(cap);
                mostrandoCamera = true;
            } else {
                // ESTADO 2: MOSTRAR C√ÇMERA AO VIVO
                if (cap.cam !== "") {
                    interface.classList.add('hidden');
                    cameraCont.style.opacity = "1";
                    
                    if (Hls.isSupported()) {
                        hls.loadSource(cap.cam);
                        hls.attachMedia(video);
                        hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
                    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                        video.src = cap.cam;
                        video.play();
                    }
                }
                mostrandoCamera = false;
                i = (i + 1) % capitais.length;
            }
        }

        async function carregarDados(cap) {
            try {
                // Buscar Clima
                const resC = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cap.n},BR&units=metric&lang=pt_br&appid=${API_KEY}`);
                const dataC = await resC.json();
                document.getElementById('cidade').innerText = cap.n;
                document.getElementById('estado').innerText = `CAPITAL: ${cap.s}`;
                document.getElementById('temp').innerText = Math.round(dataC.main.temp) + '¬∞C';
                document.getElementById('icone').src = `https://openweathermap.org/img/wn/${dataC.weather[0].icon}@4x.png`;

                // Buscar Not√≠cias
                const rss = `https://news.google.com/rss/search?q=noticias+${cap.n}&hl=pt-BR&gl=BR&ceid=BR:pt-419`;
                const resN = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rss)}`);
                const dataN = await resN.json();
                if(dataN.items.length > 0) {
                    document.getElementById('noticia').innerText = dataN.items[0].title.split(" - ")[0];
                }
            } catch (e) { console.log("Erro ao carregar dados"); }
        }

        setInterval(alternarCiclo, 10000);
        alternarCiclo();
    </script>
</body>
</html>



